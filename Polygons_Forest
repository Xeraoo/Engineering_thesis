/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var Forest = /* color: #126a0a */ee.Geometry.MultiPolygon(
        [[[[18.42091915412874, 50.26099619769025],
           [18.426755640945146, 50.24991100166786],
           [18.43911526008577, 50.24980123435689],
           [18.4488999585721, 50.24815469435021],
           [18.455423090896318, 50.24178753770111],
           [18.458512995681474, 50.238823226346575],
           [18.45885631843538, 50.227403415613246],
           [18.46658108039827, 50.229709559316674],
           [18.47361919685335, 50.23366268906789],
           [18.482202265701005, 50.23465092029833],
           [18.488897059402177, 50.23695671351474],
           [18.490442011794755, 50.24003093100227],
           [18.48254558845491, 50.24101903023551],
           [18.476537440261552, 50.23948197813358],
           [18.472932551345536, 50.24727651641778],
           [18.45937130256624, 50.247386289544316],
           [18.45387813850374, 50.253094143698526],
           [18.450444910964677, 50.257484335508806],
           [18.438943598708818, 50.25989876857008],
           [18.425554011306474, 50.260666971608934]]],
         [[[18.483612125017377, 50.23053642089987],
           [18.478633945085736, 50.226253568092915],
           [18.483354632951947, 50.2258691906994],
           [18.488332812883588, 50.218400672276935],
           [18.488933627702924, 50.21345762738735],
           [18.493911807634564, 50.213073146875104],
           [18.498117511369916, 50.221585918732956],
           [18.505327289201947, 50.22054249935292],
           [18.510133807756635, 50.2204875819112],
           [18.50979048500273, 50.222519485147686],
           [18.5054989505789, 50.22603392424738],
           [18.497430865862103, 50.22784595572155],
           [18.493654315569135, 50.2295481043912],
           [18.490221088030072, 50.227187043151346],
           [18.48781782875273, 50.22746159116198]]],
         [[[18.570483286930667, 50.23380818402748],
           [18.566277583195316, 50.23128261886493],
           [18.568337519718753, 50.22941581080983],
           [18.573744853092776, 50.22787838459518],
           [18.57940967853223, 50.22716456271861],
           [18.584817011906253, 50.22749402029697],
           [18.585589488102542, 50.229964879588906],
           [18.58490284259473, 50.23260032172652],
           [18.58713444049512, 50.23281993532984],
           [18.588250239445316, 50.234467005113245],
           [18.58910854633008, 50.23715709673422],
           [18.586018641544925, 50.23858443065135],
           [18.582242091251956, 50.240450879754455],
           [18.58437477398457, 50.24348721651568],
           [18.58343063641133, 50.245024139469706],
           [18.574246752744337, 50.24601213519811],
           [18.567294466977735, 50.24057790523378],
           [18.563260424619337, 50.23904083890783],
           [18.561372149472852, 50.2399191685914],
           [18.56197296429219, 50.24206002939609],
           [18.564805377011915, 50.24326765204798],
           [18.567981112485548, 50.24568280556432],
           [18.568496096616407, 50.248591805264006],
           [18.561629641538282, 50.24359699837026],
           [18.558368075376173, 50.2428834117957],
           [18.552359927182813, 50.24359699837026],
           [18.55115829754414, 50.24507902865859],
           [18.552617419248243, 50.24700011044537],
           [18.556994784360548, 50.24946995895916],
           [18.552560520943295, 50.249012383260116],
           [18.547839833077084, 50.245444748951556],
           [18.544749928291928, 50.24511541539711],
           [18.544598104945393, 50.24703130598994],
           [18.546057226649495, 50.247964374306775],
           [18.542881491175862, 50.2494462687911],
           [18.537045004359456, 50.25147693824135],
           [18.52966356515047, 50.252794082965416],
           [18.523912909022542, 50.25411119128007],
           [18.51670313119051, 50.251312292590804],
           [18.51944971322176, 50.250598821531064],
           [18.52597284554598, 50.24867788481082],
           [18.533010962001057, 50.2458237786968],
           [18.541336538783284, 50.243573305282645],
           [18.54940462350008, 50.24225590568423],
           [18.55764436959383, 50.238193694370025],
           [18.561396645526596, 50.237738989691586],
           [18.56603150270433, 50.23817816854945],
           [18.571095513324448, 50.23905651412759],
           [18.57306961915941, 50.23576263476329],
           [18.572897957782455, 50.23422541317606]]],
         [[[18.67228029262897, 50.17761648911422],
           [18.676142673610414, 50.17706681781787],
           [18.679833393214906, 50.17965021792257],
           [18.68524072658893, 50.17904560488786],
           [18.692622165797914, 50.17954028884907],
           [18.697171192287172, 50.18300293314899],
           [18.697857837794984, 50.187014889609756],
           [18.680176715968813, 50.189322985813305],
           [18.67476938259479, 50.18437692878406],
           [18.674941043971742, 50.17992503949966]]],
         [[[18.89545494323373, 50.20473817885258],
           [18.8992314935267, 50.20243082776553],
           [18.904038012081386, 50.20759474471137],
           [18.913994371944668, 50.203859201114284],
           [18.920860827022793, 50.20462830752052],
           [18.919830858761074, 50.20682568610691],
           [18.91639763122201, 50.20858351613563],
           [18.913994371944668, 50.206166483153616],
           [18.911247789913418, 50.20781447346494],
           [18.909016192013027, 50.21616341647048],
           [18.903351366573574, 50.21660279405831],
           [18.898029863888027, 50.210011705359456],
           [18.895626604610683, 50.206496085768414],
           [18.888416826778652, 50.211000426706796]]],
         [[[18.981262559871812, 50.16582956945354],
           [18.978430147152086, 50.16412514748411],
           [18.975769395809312, 50.1619258035196],
           [18.973966951351304, 50.15890154033374],
           [18.97336613653197, 50.15631701836767],
           [18.97010457036986, 50.156427000872036],
           [18.96984707830443, 50.15384234513256],
           [18.981434221248765, 50.15125754967198],
           [18.979975099544664, 50.15356737353344]]],
         [[[18.983607920256436, 50.16087977580293],
           [18.987813623991787, 50.158295360783555],
           [18.99322095736581, 50.15846032761876],
           [18.992877634611904, 50.15543584519299],
           [18.993564280119717, 50.15428099233878],
           [18.999915751066982, 50.15604075698459],
           [19.000087412443936, 50.15763548775025],
           [18.997598322478115, 50.15692061501945],
           [18.99596753939706, 50.15967006701698],
           [18.996911676970303, 50.16115470534866],
           [18.99596753939706, 50.1623093921741],
           [18.990646036711514, 50.16087977580293],
           [18.987126978483975, 50.1623643765653],
           [18.988586100188076, 50.164453736564866],
           [18.984895380583584, 50.16511351548542]]],
         [[[19.01155671464391, 50.14506041058518],
           [19.008895963301136, 50.1410449309544],
           [19.011385053266956, 50.13961467871702],
           [19.01773652421422, 50.13856946734755],
           [19.02151307450719, 50.14032981018085],
           [19.02374467240758, 50.141870057024754],
           [19.01979646073766, 50.14506041058518]]],
         [[[19.06286994913335, 50.151320854948885],
           [19.06364242532964, 50.14840592184091],
           [19.077032012731983, 50.14906592225567],
           [19.077032012731983, 50.14664587620467],
           [19.07711784342046, 50.14373065814023],
           [19.076259536535694, 50.140870271504355],
           [19.072740478308155, 50.13844981075426],
           [19.065273208410694, 50.13932999246922],
           [19.069650573523, 50.13542406259923],
           [19.070938033850148, 50.13157283364666],
           [19.07308380106206, 50.1308575712842],
           [19.07565872171636, 50.131242713884745],
           [19.073942107946827, 50.13278325328968],
           [19.074285430700733, 50.13454380902361],
           [19.07488624552007, 50.136579370841396],
           [19.074322744273125, 50.138424411316954],
           [19.077584310435235, 50.14062483640943],
           [19.07895760145086, 50.14354024376238],
           [19.086510702036797, 50.14348523772112],
           [19.086081548594414, 50.14574043354416],
           [19.081875844859063, 50.14986551660282],
           [19.074837728403985, 50.15206541541956],
           [19.06900124158758, 50.152010419182545],
           [19.062306447886407, 50.15179043360201]]],
         [[[19.1623922292912, 50.50721124940399],
           [19.141792864056825, 50.50142470515248],
           [19.13870295927167, 50.49672944069611],
           [19.117073625775575, 50.49629264818086],
           [19.11793193266034, 50.493453398381426],
           [19.12617167875409, 50.49192450088331],
           [19.119133562299012, 50.480346957110946],
           [19.134068102093934, 50.47630507112342],
           [19.133553117963075, 50.47029622347259],
           [19.14213618681073, 50.46679981520782],
           [19.1404195730412, 50.472590600891],
           [19.146084398480653, 50.474229373735604],
           [19.15089091703534, 50.46669054828359],
           [19.158959001752137, 50.4638495196299],
           [19.166512102338075, 50.46712761446569],
           [19.192432970257997, 50.464068066355296],
           [19.19586619779706, 50.47182582078959],
           [19.191231340619325, 50.47969153961925],
           [19.18264827177167, 50.48613608356686],
           [19.169430345746278, 50.48897577312369],
           [19.16462382719159, 50.49530985025406],
           [19.161533922406434, 50.49760301360977],
           [19.16187724516034, 50.50186145021079]]],
         [[[19.10546797310133, 50.50020486784827],
           [19.13842695747633, 50.506209913478955],
           [19.172072587359143, 50.51461569457912],
           [19.180827317583752, 50.51974576051958],
           [19.204688248980236, 50.516907920606535],
           [19.198680100786877, 50.52422046910368],
           [19.191813645708752, 50.529895098988206],
           [19.179454026568127, 50.531641001658045],
           [19.148723692042953, 50.52607571164991],
           [19.136707395656234, 50.522583429813515],
           [19.134132475001937, 50.514179067477585],
           [19.131900877101547, 50.50992174159435],
           [19.120742887599594, 50.50664661428453],
           [19.114048093898422, 50.5106859052791],
           [19.099456876857406, 50.50828420633609]]],
         [[[19.270826164932448, 50.41155257042922],
           [19.27048284217854, 50.407504804424946],
           [19.27597600624104, 50.40662956631023],
           [19.28473073646565, 50.407942417420244],
           [19.28576070472737, 50.402800209484894],
           [19.292627159805495, 50.40115896183749],
           [19.295373741836745, 50.40531667882759],
           [19.289193932266432, 50.413302848634224],
           [19.29073888465901, 50.4192095602114],
           [19.285932366104323, 50.42041268894297],
           [19.28078252479573, 50.41581876027368],
           [19.261728111953932, 50.41636567990648]]],
         [[[19.294889273027074, 50.3766551827405],
           [19.305360617021215, 50.369429284979084],
           [19.30347234187473, 50.36570642329737],
           [19.29248601374973, 50.36680141293393],
           [19.29025441584934, 50.362968838668465],
           [19.299352468827855, 50.360559633569515],
           [19.311883749345434, 50.36121670163344],
           [19.324586691239965, 50.36362587338096],
           [19.325273336747777, 50.37030520998814],
           [19.314115347245824, 50.369538776489506]]],
         [[[18.8708383195965, 50.09830364666729],
           [18.85813537770197, 50.09588103284735],
           [18.858822023209783, 50.08343567678777],
           [18.85161224537775, 50.0756143749544],
           [18.851440584000798, 50.071097267365495],
           [18.861740266617986, 50.07186851097904],
           [18.8708383195965, 50.06569821476577],
           [18.88285461598322, 50.062943361935744],
           [18.894527589616033, 50.06404532205371],
           [18.899505769547673, 50.07319061403074],
           [18.908947145280095, 50.07814817583536],
           [18.919933473405095, 50.075063530957024],
           [18.93280807667658, 50.06999546925819],
           [18.942936097916814, 50.06922419552144],
           [18.96078888111994, 50.069885288055225],
           [18.96799865895197, 50.06162097637865],
           [18.991172944840642, 50.048395115808404],
           [19.01417556935236, 50.04310375081148],
           [19.025668530290222, 50.045128998412316],
           [19.035109906022644, 50.05262461039484],
           [19.03545322877655, 50.06739194890903],
           [19.03648319703827, 50.07730775890987],
           [19.01725712281952, 50.07785857712479],
           [18.993911175553894, 50.08072272983371],
           [18.952893373572376, 50.078596790989764],
           [18.916501161658314, 50.08586688641612],
           [18.900193330847767, 50.09423714566413],
           [18.892296907507923, 50.08862042252379],
           [18.87787735184386, 50.09093327060324]]],
         [[[18.781987037970453, 50.5091918790176],
           [18.786621895148187, 50.5010035082171],
           [18.803444710089593, 50.50012999819395],
           [18.809624519659906, 50.50624422909728],
           [18.821125831915765, 50.50657175484208],
           [18.819409218146234, 50.50187700208495],
           [18.828850593878656, 50.49783695751834],
           [18.837776985480218, 50.494342586234914],
           [18.853398170782953, 50.49019268459202],
           [18.85374149353686, 50.48495018252012],
           [18.846875038458734, 50.482984094286195],
           [18.8367470172185, 50.48778994334311],
           [18.82799228699389, 50.484622506828046],
           [18.821297493292718, 50.48516863171922],
           [18.820439186407953, 50.489428189266306],
           [18.815117683722406, 50.49019268459202],
           [18.80704959900561, 50.48746228734236],
           [18.809109535529046, 50.48047175139762],
           [18.808422890021234, 50.477303824355154],
           [18.826618995978265, 50.47140435994072],
           [18.846016731573968, 50.466159773507634],
           [18.854084816290765, 50.46495780718554],
           [18.867131080939203, 50.472059892343054],
           [18.872795906378656, 50.48090869018914],
           [18.880838428732186, 50.479120373420194],
           [18.87277034401539, 50.48327124753239],
           [18.8725264253066, 50.50027405348703],
           [18.87201144117574, 50.506497440908625],
           [18.852087445771506, 50.50713524142645],
           [18.837839551484397, 50.52634587992822],
           [18.825651593720725, 50.512375281853515],
           [18.809687085664084, 50.51019200235093]]]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
//Tymoteusz Maj
//Informatyka Geoprzestrzenna (Geoinformacja)
//Praca inżynierska

//Setting up the work area

Map.setCenter(18.8, 50.3, 10); // Center the map on the work area

var GZMRectangle= ee.Geometry.Rectangle([18.25, 49.95, 19.65, 50.55]); // Set work area as krakow using a rectangle

Map.addLayer(ee.Image().paint(GZMRectangle, 0, 2), {}, 'GZM Rectangle'); // Add the work area to the map

//The square showing the krakow area, is used to properly narrow down the work area so that it 
//is in the area where LANDSAT images are downloaded, making the work faster.


//Adding the Boundaries_GZM asset extracted with QGIS from the counties of Poland to the work.
var GZMBoundaries = ee.FeatureCollection("users/tymoteuszmaj/GZM");
Map.addLayer(GZMBoundaries, {}, 'Boundaries');

//Determining the year for which we perform the analysis

var analysisYear = 2020;
var startDate = ee.Date.fromYMD(analysisYear, 3, 1);
var endDate = ee.Date.fromYMD(analysisYear, 9, 30);

// Download LANDSAT/LC08/C01/T1_TOA data
var landsatCollection = ee.ImageCollection("LANDSAT/LC08/C01/T1_TOA")
    .filterBounds(GZMRectangle)
    .filterDate(startDate, endDate) //Analysis in terms of narrowing the period to one year
    .sort("CLOUD_COVER", true) //Analysis in terms of least cloud cover
    .limit(20); //limit set at 20 photos that have the least cloud cover
    
var medianImage = landsatCollection.median(); // Select the median image from the collection


//Trim LANDSAT images to the area of the city of Krakow, using an asset
var landsatImage = medianImage.clip(GZMBoundaries);


// RGB image
var rgbImage = landsatImage.select(['B4', 'B3', 'B2']); // Create RGB image using red, green, and blue bands
Map.addLayer(rgbImage, {min: 0, max: 0.3}, 'RGB Image'); // Display the RGB image on the map

// Eksportowanie warstwy do assetu

// Tworzenie kolekcji obiektów typu FeatureCollection
var forestCollection = ee.FeatureCollection([Forest]);

// Definiowanie nazwy i ścieżki docelowego assetu
var GZM_Forest = 'GZM_Forest';

// Eksportowanie warstwy "Farmlands" do assetu
Export.table.toAsset({
  collection: forestCollection, // Warstwa do eksportu
  description: 'Forest_Export', // Opis eksportu
  assetId: GZM_Forest // Identyfikator docelowego assetu
});
