/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var Buildings = /* color: #d89942 */ee.Geometry.MultiPolygon(
        [[[[19.064977580536592, 50.27228215494905],
           [19.047639781464326, 50.265369567637016],
           [19.048498088349092, 50.263120017288294],
           [19.053991252411592, 50.2627359370979],
           [19.06077187680124, 50.26328462213607],
           [19.064634257782686, 50.26081548968891],
           [19.066951686371553, 50.25971805640547],
           [19.065149241913545, 50.2588949648508],
           [19.063690120209444, 50.258675471367674],
           [19.061234432651624, 50.2572032630127],
           [19.0572862209817, 50.2564898801624],
           [19.055912929966077, 50.25610574651066],
           [19.05659957547389, 50.25067266748728],
           [19.059861141636, 50.251111727184764],
           [19.060719448520764, 50.252867925519546],
           [19.069903332187756, 50.25248376266478],
           [19.077370602085217, 50.253965516609156],
           [19.07651229520045, 50.25127637352835],
           [19.078486401035413, 50.249135926687345],
           [19.081404644443616, 50.249135926687345],
           [19.08303542752467, 50.25067266748728],
           [19.08758445401393, 50.250508019057726],
           [19.089987713291272, 50.24984941965047],
           [19.0902452053567, 50.252209358729324],
           [19.090416866733655, 50.2535264832074],
           [19.084151226474866, 50.25566673283042],
           [19.081919628574475, 50.25659963206544],
           [19.08500953335963, 50.25835562812839],
           [19.085352856113538, 50.260166431277256],
           [19.085953670932874, 50.261373595135794],
           [19.09324927945338, 50.26115411307334],
           [19.08681197781764, 50.26395243361604],
           [19.08758445401393, 50.26592761972401],
           [19.086125332309827, 50.26740895554876],
           [19.08054633755885, 50.26718950129698],
           [19.07676978726588, 50.26927427585888],
           [19.07333655972682, 50.26834162483684],
           [19.068701702549085, 50.27064578829746],
           [19.06956000943385, 50.27305955424681],
           [19.073164898349866, 50.27508921726798],
           [19.0763406338235, 50.27646056221994],
           [19.07505317349635, 50.27667997374656]]],
         [[[18.97608919207674, 50.26823396321708],
           [19.004842472716387, 50.26016849485742],
           [19.01179475848299, 50.258741807281154],
           [19.018661213561113, 50.25879668067036],
           [19.022094441100176, 50.2574248269781],
           [19.02724428240877, 50.2570407008649],
           [19.028789234801348, 50.25605293378031],
           [19.021321964903887, 50.25649194390183],
           [19.0110222822867, 50.256985825453036],
           [18.997203541441973, 50.261156176610726],
           [18.975230885191973, 50.26757560883323],
           [18.962184620543535, 50.271470739890084],
           [18.957206440611895, 50.27174503288539],
           [18.955146504088457, 50.261046435205],
           [18.973256779357012, 50.25610781026674],
           [18.977977467223223, 50.25693094997795],
           [18.978664112731035, 50.25868693382877],
           [18.986903858824785, 50.256711447445575],
           [18.991624546690996, 50.2563821917507],
           [18.99677438799959, 50.25621756304996],
           [18.998920155211504, 50.258522313092314],
           [19.01325388018709, 50.25599805723068],
           [19.033853245421465, 50.25429685284016],
           [19.03068103366431, 50.25240213227292],
           [19.02544536166724, 50.24817612920517],
           [19.01420154147681, 50.24790170046305],
           [19.011197467380132, 50.24685885683057],
           [19.019179721408452, 50.24636487030294],
           [19.033341785007085, 50.24499265863829],
           [19.041409869723882, 50.24422420284869],
           [19.04175319247779, 50.24740772474488],
           [19.042010684543218, 50.25031661915731],
           [19.042868991427984, 50.25531072181717],
           [19.04324527206779, 50.257669027558514],
           [19.043931917575602, 50.260577295577434],
           [19.03225894394279, 50.2623331450226],
           [19.02676577988029, 50.262662359587985],
           [19.02204509201408, 50.26524112829313],
           [19.00925631943107, 50.267271124584056],
           [18.994150118259196, 50.27017880636569],
           [18.986819320572746, 50.27580286150251],
           [18.969138198746574, 50.28710139629619],
           [18.966134124649894, 50.285565830610786],
           [18.96252923573388, 50.28161700562265],
           [18.96149926747216, 50.27514461176176],
           [18.95995431507958, 50.27311495110205]]],
         [[[19.16155347248715, 50.31673887256645],
           [19.1657591762225, 50.3133955532474],
           [19.1697932185809, 50.3144369402134],
           [19.175458044020353, 50.314985029454675],
           [19.180350393263517, 50.31821862736559],
           [19.183354467360196, 50.31920510497557],
           [19.183182805983243, 50.32260281560478],
           [19.181637853590665, 50.32452077080502],
           [19.1807795467059, 50.326712624833554],
           [19.179663747755704, 50.329835842162694],
           [19.17605885883969, 50.332356183669376],
           [19.173827260939298, 50.32780851393955],
           [19.171681493727384, 50.32660303453299],
           [19.16481503864926, 50.32780851393955],
           [19.161639303175626, 50.3257263030305],
           [19.162926763502774, 50.323589202231695],
           [19.164385885206876, 50.321945213147444],
           [19.168076604811368, 50.32210961461476],
           [19.166874975172696, 50.32068478300665],
           [19.166188329664884, 50.31904069346221]]],
         [[[19.26316662599286, 50.34023664943462],
           [19.269518096940125, 50.328676770288695],
           [19.281019409195984, 50.32862197743475],
           [19.277071197526062, 50.34023664943462],
           [19.274238784806336, 50.34297554506647]]],
         [[[19.234010410842213, 50.34199420423616],
           [19.240276051101002, 50.34122731353427],
           [19.24534006172112, 50.339583934620784],
           [19.24010438972405, 50.3447329985223],
           [19.235212040480885, 50.34440435154682],
           [19.233667088088307, 50.346321426843616],
           [19.225942326125416, 50.34341839697503],
           [19.20442378093837, 50.33395609647861],
           [19.1991881089413, 50.331764576547066],
           [19.20021807720302, 50.33017566138702],
           [19.195497389336808, 50.328257934399005],
           [19.189145918389542, 50.328148347662065],
           [19.203136320611222, 50.318174896696],
           [19.20940196087001, 50.31779126063283],
           [19.21918665935634, 50.319764213118596],
           [19.223564024468644, 50.322668688594305],
           [19.224113662736023, 50.324183546444175],
           [19.227289398209656, 50.32489591514626],
           [19.2351858215495, 50.325060306407345],
           [19.2366449432536, 50.326430211469535],
           [19.23964901735028, 50.32725213555275],
           [19.24291058351239, 50.32801925187151],
           [19.247116287247742, 50.32927948751224],
           [19.25115032960614, 50.32807404542042],
           [19.254755218522156, 50.32818363232872],
           [19.258703430192078, 50.33021094454835],
           [19.25964756776532, 50.33366265553122],
           [19.257587631241883, 50.337716725963745],
           [19.255613525406922, 50.33968885135595],
           [19.251321990983094, 50.339743631448115],
           [19.248575408951844, 50.338702798894246],
           [19.247974594132508, 50.337168898824416],
           [19.25037785340985, 50.33536102444124],
           [19.25115032960614, 50.33382701646629],
           [19.252523620621766, 50.33322435692459],
           [19.253725250260437, 50.33410095009448],
           [19.257501800553406, 50.33229295896029],
           [19.257072647111023, 50.33075885192278],
           [19.254240234391297, 50.329991779829555],
           [19.250034530655945, 50.33097801310355],
           [19.24866123964032, 50.33388180331827],
           [19.247116287247742, 50.33300520610503],
           [19.241108139054383, 50.33147112206436],
           [19.23166676332196, 50.33437488214327],
           [19.229778488175477, 50.339853191442906],
           [19.233383377091492, 50.342044338271954]]],
         [[[19.108098985373857, 50.32194241153774],
           [19.111703874289873, 50.313502371895005],
           [19.123634339988115, 50.31509184453124],
           [19.130586625754717, 50.31026845319056],
           [19.137367250144365, 50.307143949952476],
           [19.13822555702913, 50.30517047370925],
           [19.140800477683428, 50.30555421161465],
           [19.13899803322542, 50.30944623540043],
           [19.13496399086702, 50.31602357964704],
           [19.132131578147295, 50.324353576210136],
           [19.131616594016435, 50.32638105182563],
           [19.122175218284013, 50.32550431622791],
           [19.110931398093584, 50.323257607431756]]],
         [[[18.654787417211416, 50.286693815502396],
           [18.652813311376455, 50.27786356056034],
           [18.658993120946768, 50.276108283672734],
           [18.660023089208487, 50.28192239049201],
           [18.662340517797354, 50.284171052678666],
           [18.66920697287548, 50.28214177684547],
           [18.675730105199698, 50.28159330906592],
           [18.67590176657665, 50.28406136430501],
           [18.6716960628413, 50.285432450806226],
           [18.673326845922354, 50.28779062719398],
           [18.676330920019033, 50.286090558296976],
           [18.67890584067333, 50.28768094716238],
           [18.684828158178213, 50.29310980529371],
           [18.685085650243643, 50.2966738702708],
           [18.68684180619838, 50.3002223759912],
           [18.693965753341935, 50.304498582534514],
           [18.68658431413295, 50.30767807664168],
           [18.67911704423549, 50.302799110583486],
           [18.661950906540177, 50.30817142736561],
           [18.656028589035294, 50.31156992661005],
           [18.651050409103654, 50.30943218929579],
           [18.667014917160294, 50.29956446393846],
           [18.66486914994838, 50.2974261869229],
           [18.658946832443497, 50.30071580405919],
           [18.65585692765834, 50.29929033123084],
           [18.646501382614396, 50.30411483611155],
           [18.64461310746791, 50.30186711631266],
           [18.65010627153041, 50.30000307298468],
           [18.645728906418107, 50.298248612534195],
           [18.637489160324357, 50.301702644839736],
           [18.633798440719865, 50.29846792362926],
           [18.627532800461076, 50.30011272461434],
           [18.622297128464005, 50.295726462269904],
           [18.633025964523576, 50.29419117490199],
           [18.638004144455216, 50.291339795489684],
           [18.645299752975724, 50.29029790269501],
           [18.654311975265763, 50.288323727467905]]],
         [[[18.84496841129798, 50.247034073818384],
           [18.844882580609504, 50.25002531630036],
           [18.836942504912773, 50.25104064950473],
           [18.832693885833184, 50.248762979986495],
           [18.82874567416326, 50.24766526905399],
           [18.825140785247246, 50.24848855462383],
           [18.82252294924871, 50.246540089106965],
           [18.81956179049627, 50.244015198394436],
           [18.82153589633123, 50.2411608130405],
           [18.824625801116387, 50.240831449884844],
           [18.829389404326836, 50.23943163108425],
           [18.83132059481756, 50.23742789735029],
           [18.827887367278496, 50.23794942519679],
           [18.826857399016777, 50.236741667807266],
           [18.833208869964043, 50.23594562916257],
           [18.838616203338066, 50.24127221799773],
           [18.84428102877752, 50.240640938092255],
           [18.85522444155828, 50.23792359436309],
           [18.85526735690252, 50.240064544790194],
           [18.85754187014715, 50.24264453677636],
           [18.863807510405938, 50.2412173244248],
           [18.866940330535332, 50.24198582869341],
           [18.861919235259453, 50.244044261228105],
           [18.858099769622246, 50.2459379406478],
           [18.85475237277166, 50.246020272828844],
           [18.84852964785711, 50.24415404179963],
           [18.844667266875664, 50.245004832655646]]],
         [[[18.922596149529284, 50.3546819046139],
           [18.91598718651659, 50.35084835166494],
           [18.91392724999315, 50.346521541547936],
           [18.921308689202135, 50.34537131050312],
           [18.92671602257616, 50.34701448918178],
           [18.93117921837694, 50.348493301381794],
           [18.92843263634569, 50.35084835166494],
           [18.92491357811815, 50.352491340830454]]],
         [[[18.78180034284997, 50.310157680257504],
           [18.77999789839196, 50.30615607725531],
           [18.76926906233239, 50.30577234420622],
           [18.767638279251337, 50.30314094845972],
           [18.769869877151727, 50.301441427997425],
           [18.774247242264032, 50.3005094071234],
           [18.77750880842614, 50.298480827975425],
           [18.776135517410516, 50.29754874909157],
           [18.770384861282587, 50.29732943375893],
           [18.771243168167352, 50.29464273887846],
           [18.774350984910505, 50.291367336073556],
           [18.788083895066755, 50.29378005145579],
           [18.79349122844078, 50.29114799224485],
           [18.80198846659996, 50.29383488447445],
           [18.808339937547224, 50.295534676708094],
           [18.805335863450544, 50.2992082137508],
           [18.807739122727888, 50.30194947446907],
           [18.80567918620445, 50.304471294805126],
           [18.803790911057966, 50.305567696724296],
           [18.78971467814781, 50.305238778802504],
           [18.792117937425154, 50.30660925513598],
           [18.795551164964216, 50.30710261694819],
           [18.792547090867536, 50.308363407214905],
           [18.789028032639997, 50.30715743461135],
           [18.786023958543318, 50.3081989582062],
           [18.78550897441246, 50.309788608135335]]]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
//Tymoteusz Maj
//Informatyka Geoprzestrzenna (Geoinformacja)
//Praca inżynierska

//Setting up the work area

Map.setCenter(18.8, 50.3, 10); // Center the map on the work area

var GZMRectangle= ee.Geometry.Rectangle([18.25, 49.95, 19.65, 50.55]); // Set work area as krakow using a rectangle

Map.addLayer(ee.Image().paint(GZMRectangle, 0, 2), {}, 'GZM Rectangle'); // Add the work area to the map

//The square showing the krakow area, is used to properly narrow down the work area so that it 
//is in the area where LANDSAT images are downloaded, making the work faster.


//Adding the Boundaries_GZM asset extracted with QGIS from the counties of Poland to the work.
var GZMBoundaries = ee.FeatureCollection("users/tymoteuszmaj/GZM");
Map.addLayer(GZMBoundaries, {}, 'Boundaries');

//Determining the year for which we perform the analysis

var analysisYear = 1990;
var startDate = ee.Date.fromYMD(analysisYear, 1, 1);
var endDate = ee.Date.fromYMD(analysisYear, 12, 31);

// Download LANDSAT/LT05/C01/T1_TOA data
var landsatCollection = ee.ImageCollection("LANDSAT/LT05/C01/T1_TOA")
    .filterBounds(GZMRectangle)
    .filterDate(startDate, endDate) //Analysis in terms of narrowing the period to one year
    .sort("CLOUD_COVER", true) //Analysis in terms of least cloud cover
    .limit(20); //limit set at 20 photos that have the least cloud cover
    
var medianImage = landsatCollection.median(); // Select the median image from the collection


//Trim LANDSAT images to the area of the city of Krakow, using an asset
var landsatImage = medianImage.clip(GZMBoundaries);


// RGB image
var rgbImage = landsatImage.select(['B3', 'B2', 'B1']); // Create RGB image using red, green, and blue bands
Map.addLayer(rgbImage, {min: 0, max: 0.3}, 'RGB Image'); // Display the RGB image on the map

// Eksportowanie warstwy do assetu

// Tworzenie kolekcji obiektów typu FeatureCollection
var buildingsCollection = ee.FeatureCollection([Buildings]);

// Definiowanie nazwy i ścieżki docelowego assetu
var GZM_Buildings = 'GZM_Buildings';

// Eksportowanie warstwy "Farmlands" do assetu
Export.table.toAsset({
  collection: buildingsCollection, // Warstwa do eksportu
  description: 'Buildings_Export', // Opis eksportu
  assetId: GZM_Buildings // Identyfikator docelowego assetu
});