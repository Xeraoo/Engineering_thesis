/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var water = /* color: #069dff */ee.Geometry.MultiPolygon(
        [[[[19.10578516548469, 50.27045032100349],
           [19.103424821551585, 50.26924338718893],
           [19.101708207782053, 50.269353109708874],
           [19.10157946174934, 50.269956579049506],
           [19.100463662799143, 50.269874288226106],
           [19.100206170733713, 50.26795412864204],
           [19.1070297104676, 50.26658253867864],
           [19.110205445941233, 50.26949026250329]]],
         [[[19.113027630672942, 50.26795573797233],
           [19.11204057775546, 50.26658414805529],
           [19.115645466671477, 50.26211249062177],
           [19.117018757687102, 50.26241427212493],
           [19.116203366146575, 50.26381341592993]]],
         [[[19.11706167303134, 50.265706309777144],
           [19.117748318539153, 50.26471872237337],
           [19.118392048702727, 50.2640603193938],
           [19.11877828680087, 50.263155000435546],
           [19.1190357788663, 50.26213992538288],
           [19.120022831783782, 50.262578879411684],
           [19.121138630733977, 50.263374473278304],
           [19.12083822332431, 50.263950584679],
           [19.120194493160735, 50.26463642249867],
           [19.119894085751067, 50.265185085643736],
           [19.119422016964446, 50.26620009579957],
           [19.11834913335849, 50.266968197213956],
           [19.11658960424472, 50.26661158024076]]],
         [[[19.111911831722747, 50.263429341331],
           [19.110023556576262, 50.26279835490914],
           [19.11311346136142, 50.262304533617716]]],
         [[[19.122726498470794, 50.26087791001675],
           [19.1210528000455, 50.26038406881511],
           [19.122211514339934, 50.259917658534725],
           [19.12358480535556, 50.260466376037606],
           [19.124958096371184, 50.26071329685175],
           [19.124743519649993, 50.26104252261289]]],
         [[[19.097148953304778, 50.276691838491004],
           [19.097191868649016, 50.276445000513945],
           [19.10032468877841, 50.27521079143131],
           [19.1025562866788, 50.274250828913175],
           [19.103157101498137, 50.27400397828002],
           [19.102770863399993, 50.27482680874671],
           [19.101268826351653, 50.27534792735384],
           [19.09933763586093, 50.27597874750987]]],
         [[[19.108950672970305, 50.2749228047082],
           [19.10779195867587, 50.27399026431842],
           [19.11036687933017, 50.27217998671416],
           [19.11111789785434, 50.27260513385064],
           [19.110474167690764, 50.27338684609783],
           [19.109787522182952, 50.27409997590054]]],
         [[[19.04435353227028, 50.25215894117815],
           [19.04431061692604, 50.2504301582171],
           [19.04285149522194, 50.24993620870792],
           [19.042937325910415, 50.249442254078595],
           [19.044224786237564, 50.24960690619061],
           [19.04559807725319, 50.24988132511309],
           [19.045383500531997, 50.25062224831012]]],
         [[[19.044954347089615, 50.24667052480078],
           [19.04383854813942, 50.24477687448911],
           [19.044911431745376, 50.2446396505284],
           [19.045469331220474, 50.245270877476365]]],
         [[[18.97966821902239, 50.27288411402969],
           [18.977222044400808, 50.273021256653934],
           [18.97692163699114, 50.27274697101044],
           [18.981320459775564, 50.27099150547602],
           [18.983273107938405, 50.27152638073657]]],
         [[[18.992006380490896, 50.276682818647615],
           [18.991040785245534, 50.276243994609324],
           [18.990697462491628, 50.27550346987268],
           [18.991019327573415, 50.27502349398369],
           [18.992070753507253, 50.2743103780135],
           [18.993014891080495, 50.27403609979625],
           [18.993722994260427, 50.274392661170566],
           [18.993787367276784, 50.27495492560454],
           [18.99337967150652, 50.275434902184784],
           [18.99312217944109, 50.276148001311775]]],
         [[[18.928017624414906, 50.280322705417184],
           [18.927245148218617, 50.28035012968827],
           [18.926601418055043, 50.28006217405361],
           [18.926730164087758, 50.27943140800506],
           [18.927481182611928, 50.27881434617429],
           [18.928725727594838, 50.28035012968827]]],
         [[[19.236620712280253, 50.140464085602964],
           [19.225806045532206, 50.1366682762751],
           [19.222630310058573, 50.13518287759999],
           [19.221257019042948, 50.13298220220389],
           [19.220656204223612, 50.13072640488095],
           [19.22099952697752, 50.12742504638837],
           [19.22220115661619, 50.12417848845813],
           [19.222544479370097, 50.12269270205925],
           [19.220570373535136, 50.12175718325876],
           [19.219626235961893, 50.11988609080806],
           [19.219111251831034, 50.11784981886678],
           [19.219111251831034, 50.11625376139508],
           [19.21971206665037, 50.11586849817179],
           [19.221772003173808, 50.11570338441282],
           [19.223574447631815, 50.11366693456847],
           [19.23042244023991, 50.11278766630019],
           [19.234713974663737, 50.111466655292865],
           [19.236773911187175, 50.11333807679781],
           [19.236258927056316, 50.115649731800374],
           [19.236773911187175, 50.117796168659595],
           [19.238490524956706, 50.12027270700282],
           [19.23943466252995, 50.121703537430285],
           [19.23866218633366, 50.12280414711931],
           [19.23917717046452, 50.12390473150305],
           [19.241065445611003, 50.12329941322351],
           [19.242524567315105, 50.12456506998681],
           [19.243468704888347, 50.12610582435528],
           [19.243983689019206, 50.128141745126904],
           [19.242696228692058, 50.13171815298866],
           [19.241065445611003, 50.134083937453966],
           [19.24192375249577, 50.13622954779493],
           [19.24261039800358, 50.13975034088265],
           [19.239777985283855, 50.13474413549903],
           [19.23763221807194, 50.13474413549903],
           [19.23711723394108, 50.13584444533146],
           [19.236516419121745, 50.138100001383926],
           [19.23763221807194, 50.139310255916236],
           [19.238318863579753, 50.14112558030936]]],
         [[[19.24058989550235, 50.14955216892676],
           [19.23732832934024, 50.14971716592962],
           [19.23483923937442, 50.147682163108314],
           [19.232950964227935, 50.14652712298584],
           [19.23157767321231, 50.144877017278816],
           [19.23106268908145, 50.14355689172438],
           [19.23063353563907, 50.14240175197624],
           [19.229174413934967, 50.141741659595624],
           [19.224797048822662, 50.139101198984505],
           [19.241877355829498, 50.14339187346823],
           [19.242134847894928, 50.14977216480408]]],
         [[[19.246683874384185, 50.14053146657348],
           [19.245224752680084, 50.13117894268006],
           [19.24711302782657, 50.13139902306764],
           [19.250117101923248, 50.13381984052915],
           [19.252434530512115, 50.13591044796127],
           [19.25209120775821, 50.138110988680964],
           [19.25054625536563, 50.140146398736825],
           [19.248743810907623, 50.14141160998949]]],
         [[[19.185158081346277, 50.0998635932506],
           [19.18485767393661, 50.09667022605039],
           [19.184943504625085, 50.095789259709754],
           [19.185952015214685, 50.09607832857578],
           [19.186703033738855, 50.097138232830495],
           [19.18706781416488, 50.09834952326839],
           [19.18681032209945, 50.09910656424075],
           [19.186123676591638, 50.09998746958604]]],
         [[[19.183505840593103, 50.097165762498726],
           [19.180930919938806, 50.0961884495898],
           [19.181681938462976, 50.09572043353221],
           [19.18187505751205, 50.095307474390836],
           [19.18187505751205, 50.09503216631923],
           [19.182647533708337, 50.095307474390836],
           [19.183420009904626, 50.09544512783341]]],
         [[[18.98833771255781, 50.091104961368785],
           [18.98786564377119, 50.09030649357967],
           [18.987264828951854, 50.089563080575424],
           [18.98589153793623, 50.08873705260091],
           [18.984217839510936, 50.087332772369614],
           [18.983187871249218, 50.08653424173081],
           [18.9836170246916, 50.086093667407525],
           [18.983059125216503, 50.08543279832924],
           [18.981943326266308, 50.085019750528126],
           [18.980570035250683, 50.085074823773915],
           [18.978510098727245, 50.08339506130942],
           [18.972974019320507, 50.08309214705944],
           [18.970785336764354, 50.082403698463246],
           [18.9711715748625, 50.080999232668184],
           [18.97288818863203, 50.08094415473972],
           [18.9761068394499, 50.081274621361274],
           [18.976450162203808, 50.081742778508854],
           [18.977823453219433, 50.08267907908821],
           [18.979196744235058, 50.08267907908821],
           [18.97992630508711, 50.08204570128576],
           [18.980827527316112, 50.08190800935172],
           [18.98267288711836, 50.08218339282425],
           [18.9856340458708, 50.08245877471479],
           [18.986706929476757, 50.08345013642195],
           [18.987994389803905, 50.08471684654508],
           [18.990054326327343, 50.0862313473186],
           [18.991813855441112, 50.087855940402115],
           [18.991513448031444, 50.08879212157547],
           [18.991255955966015, 50.09005869052628],
           [18.99134178665449, 50.091380292004466],
           [18.988766866000194, 50.0920686116729]]],
         [[[19.200703526021364, 50.36023228950828],
           [19.192892933369997, 50.357494389119424],
           [19.1943520550741, 50.347143698956714],
           [19.19478120851648, 50.34593871009679],
           [19.20156183290613, 50.34347386492352],
           [19.20302095461023, 50.34517188308468],
           [19.20405092287195, 50.34648643609616],
           [19.204136753560427, 50.34758186914333],
           [19.201905155660036, 50.347855723456895],
           [19.201647663594606, 50.348951124918294],
           [19.203450108052614, 50.348786816309925],
           [19.204737568379763, 50.349005894328045],
           [19.20705499696863, 50.35075848208662],
           [19.208685780049684, 50.35119661891896],
           [19.209372425557497, 50.35053941215433],
           [19.213234806538942, 50.35251100515879],
           [19.21280565309656, 50.35393488252505],
           [19.210402393819216, 50.35798722284374],
           [19.20980157899988, 50.358480051451494],
           [19.204394245625856, 50.36028704590531],
           [19.202248478413942, 50.36067033891583]]],
         [[[19.229116536826943, 50.361240699585004],
           [19.23993120357499, 50.35146587840121],
           [19.24143324062333, 50.35382078125485],
           [19.2446518914412, 50.35434103473711],
           [19.24593935176835, 50.355299381491385],
           [19.244780637473916, 50.356175567309016],
           [19.23594007656083, 50.359899176627145],
           [19.23297891780839, 50.361240699585004]]],
         [[[19.174104308578606, 50.44276277376857],
           [19.174104308578606, 50.44172420022489],
           [19.175820922348137, 50.44183352482904],
           [19.175563430282708, 50.44068560389054],
           [19.17496261546337, 50.43948299018851],
           [19.175134276840325, 50.43713233881505],
           [19.18122825572216, 50.4351642618422],
           [19.184146499130364, 50.436476322248794],
           [19.18775138804638, 50.43746034368896],
           [19.189296340438958, 50.43871767465046],
           [19.192128753158684, 50.43986564331728],
           [19.19375953623974, 50.44008430085906],
           [19.195905303451653, 50.441669537828105],
           [19.197364425155754, 50.44369200446307],
           [19.19770774790966, 50.44527712059813],
           [19.19848022410595, 50.44702615264903],
           [19.19873771617138, 50.448611157106825],
           [19.19822273204052, 50.450469370583995],
           [19.19745025584423, 50.452600760885844],
           [19.193416213485833, 50.452600760885844],
           [19.192815398666497, 50.450141455861434],
           [19.19152793833935, 50.44921235180584],
           [19.187665557357903, 50.4492670054906],
           [19.189296340438958, 50.44800995476919],
           [19.19127044627392, 50.44669821406363],
           [19.191613769027825, 50.444894511219715],
           [19.19101295420849, 50.44287209597372],
           [19.188438033554192, 50.442161497126335],
           [19.184833144638176, 50.44090425764435],
           [19.1832881922456, 50.4395376551106],
           [19.180884932968254, 50.43975631416758],
           [19.178395843002434, 50.439974972214415],
           [19.177451705429192, 50.44090425764435]]],
         [[[19.200752087872065, 50.457356944627584],
           [19.19886381272558, 50.454460707632364],
           [19.198992558758295, 50.45306717193412],
           [19.20358450059179, 50.453422390814126],
           [19.206502743999994, 50.4536409857223],
           [19.208948918621576, 50.45260265091285],
           [19.218175717632807, 50.45099045433833],
           [19.223926373760737, 50.44918691510319],
           [19.227788754742182, 50.45309449655806],
           [19.22109396104101, 50.45372295855246],
           [19.211008855145014, 50.453777607027],
           [19.20787603501562, 50.45517112179871]]],
         [[[18.96977306026493, 50.44096173577795],
           [18.969601398887978, 50.440032451476554],
           [18.97200465816532, 50.438720489636715],
           [18.970717197838173, 50.43806449508002],
           [18.967884785118446, 50.437244489099605],
           [18.96582484859501, 50.434893726560716],
           [18.964713220924615, 50.430979890308826],
           [18.96462739023614, 50.42698846362589],
           [18.96488488230157, 50.42332480329166],
           [18.965914850563287, 50.421629580959376],
           [18.965228205055475, 50.420153047553505],
           [18.966429834694146, 50.41867646811773],
           [18.964026575416803, 50.41796550604662],
           [18.964198236793756, 50.415668478733664],
           [18.97535622629571, 50.41353542506577],
           [18.976643686622857, 50.41512155105154],
           [18.9775878241961, 50.41714515193551],
           [18.980358251761377, 50.417301885669474],
           [18.98130238933462, 50.418723819061306],
           [18.98224652690786, 50.42091132554785],
           [18.985164770316064, 50.4222237809475],
           [18.985937246512353, 50.42359088331536],
           [18.985851415823877, 50.42495794622092],
           [18.982418188284814, 50.425723484211005],
           [18.98104489726919, 50.42665304941907],
           [18.980959066580713, 50.42829341409719],
           [18.98198903484243, 50.42889486690824],
           [18.98224652690786, 50.429277605628535],
           [18.98130238933462, 50.430425803227045],
           [18.98130238933462, 50.43299547791229],
           [18.97949994487661, 50.43556501313066],
           [18.977611669730127, 50.43857173895322],
           [18.97855580730337, 50.439719711159356],
           [18.97949994487661, 50.44119563451434],
           [18.978469976614893, 50.44217955784902],
           [18.97151769084829, 50.4408676555239]]],
         [[[18.911417202127392, 50.47147211560597],
           [18.910043911111767, 50.471390173534026],
           [18.909185604227, 50.46996982172177],
           [18.907855228555615, 50.46887721436947],
           [18.90669651426118, 50.4686586898692],
           [18.908541874063427, 50.46759336846798],
           [18.910430149209912, 50.46688314086619],
           [18.911631778848584, 50.46584509672081],
           [18.914163784158642, 50.46483434763124],
           [18.91742535032075, 50.46442457833239],
           [18.918326572549756, 50.46510752519121],
           [18.916052059305127, 50.4665553399136],
           [18.91751118100923, 50.46701972392579],
           [18.92021484769624, 50.466008999942886],
           [18.92094440854829, 50.46510752519121],
           [18.919056133401806, 50.46461580444705],
           [18.91944237149995, 50.464178715048796],
           [18.92167396940034, 50.4636869846469],
           [18.92442055143159, 50.463768940068945],
           [18.924892620218213, 50.46398748716671],
           [18.91948528684419, 50.4667465574121],
           [18.91600914396089, 50.46966935721681]]],
         [[[18.557916038424903, 50.377320435754015],
           [18.554053657443458, 50.37584252146782],
           [18.550105445773536, 50.376773065461016],
           [18.54753052511924, 50.376773065461016],
           [18.54452645102256, 50.376116212772374],
           [18.54100739279502, 50.376773065461016],
           [18.53903328696006, 50.37726569900892],
           [18.53826081076377, 50.37551408981809],
           [18.5385183028292, 50.37222964826326],
           [18.541093223483497, 50.37014938433912],
           [18.561034892270527, 50.36316785998552],
           [18.563094828793965, 50.36472829603254],
           [18.568845484921894, 50.36297622395129],
           [18.572088290736566, 50.36112044133913],
           [18.580628444239984, 50.35879327962028],
           [18.584104587123285, 50.35758858638429],
           [18.591614772364984, 50.3571505085366],
           [18.593889285609613, 50.35600053495177],
           [18.5986958041643, 50.356192199150435],
           [18.60092740206469, 50.35687670782882],
           [18.602391896753172, 50.35686303961339],
           [18.598529515771727, 50.35973786911097],
           [18.587299249852563, 50.36481277914971],
           [18.574725053990747, 50.36864520450891],
           [18.56991853543606, 50.369356906570495],
           [18.567987344945337, 50.371656178740004],
           [18.562261559738527, 50.37572942177886]]],
         [[[18.55972701885128, 50.3875234251855],
           [18.554405516165733, 50.38549855918734],
           [18.555821722525597, 50.38243373267812],
           [18.56470519878292, 50.38122963950385],
           [18.568524664420128, 50.382379001833364],
           [18.564361876029015, 50.38284421200078],
           [18.562173193472862, 50.384212450752216],
           [18.56444770671749, 50.38533437707383],
           [18.563846891898155, 50.38621000844434],
           [18.561400717276573, 50.386045828793904],
           [18.560928648489952, 50.38730452492151],
           [18.562859838980675, 50.388015947084924],
           [18.562387770194054, 50.388535825762354],
           [18.56024200298214, 50.387578150093624]]],
         [[[18.455446857923903, 50.39276551132397],
           [18.45355858277742, 50.391671120896056],
           [18.460425037855543, 50.38811417754372],
           [18.471583027357497, 50.38805945325421],
           [18.4799944348282, 50.38816890177008],
           [18.48771919679109, 50.38603461014449],
           [18.491581577772536, 50.384775880309824],
           [18.49424232911531, 50.384447510510576],
           [18.489779133314528, 50.38866141696532],
           [18.488920826429762, 50.389646432009236],
           [18.49321236085359, 50.38992004366786],
           [18.488405842298903, 50.39391459408606],
           [18.46797813844148, 50.393531569593186],
           [18.46536411784754, 50.3918602085965]]],
         [[[18.701282459493086, 50.21501527402258],
           [18.699522930379317, 50.21406782952997],
           [18.698256927724287, 50.213202755083955],
           [18.700059372182295, 50.212392591777515],
           [18.703041988606856, 50.21200810268333],
           [18.70840640663664, 50.21527616123151],
           [18.701797443623946, 50.21557823937542]]],
         [[[18.683288632498236, 50.208529276828955],
           [18.68193679915473, 50.20810355782658],
           [18.68240886794135, 50.207883830403986],
           [18.683288632498236, 50.208131023683265]]]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
//Tymoteusz Maj
//Informatyka Geoprzestrzenna (Geoinformacja)
//Praca inżynierska

//Setting up the work area

Map.setCenter(18.8, 50.3, 10); // Center the map on the work area

var GZMRectangle= ee.Geometry.Rectangle([18.25, 49.95, 19.65, 50.55]); // Set work area as krakow using a rectangle

Map.addLayer(ee.Image().paint(GZMRectangle, 0, 2), {}, 'GZM Rectangle'); // Add the work area to the map

//The square showing the krakow area, is used to properly narrow down the work area so that it 
//is in the area where LANDSAT images are downloaded, making the work faster.


//Adding the Boundaries_GZM asset extracted with QGIS from the counties of Poland to the work.
var GZMBoundaries = ee.FeatureCollection("users/tymoteuszmaj/GZM");
Map.addLayer(GZMBoundaries, {}, 'Boundaries');

//Determining the year for which we perform the analysis

var analysisYear = 1990;
var startDate = ee.Date.fromYMD(analysisYear, 1, 1);
var endDate = ee.Date.fromYMD(analysisYear, 12, 31);

// Download LANDSAT/LT05/C01/T1_TOA data
var landsatCollection = ee.ImageCollection("LANDSAT/LT05/C01/T1_TOA")
    .filterBounds(GZMRectangle)
    .filterDate(startDate, endDate) //Analysis in terms of narrowing the period to one year
    .sort("CLOUD_COVER", true) //Analysis in terms of least cloud cover
    .limit(20); //limit set at 20 photos that have the least cloud cover
    
var medianImage = landsatCollection.median(); // Select the median image from the collection


//Trim LANDSAT images to the area of the city of Krakow, using an asset
var landsatImage = medianImage.clip(GZMBoundaries);


// RGB image
var rgbImage = landsatImage.select(['B3', 'B2', 'B1']); // Create RGB image using red, green, and blue bands
Map.addLayer(rgbImage, {min: 0, max: 0.3}, 'RGB Image'); // Display the RGB image on the map


// Eksportowanie warstwy do assetu

// Tworzenie kolekcji obiektów typu FeatureCollection
var waterCollection = ee.FeatureCollection([water]);

// Definiowanie nazwy i ścieżki docelowego assetu
var GZM_Water = 'GZM_Water';

// Eksportowanie warstwy "Farmlands" do assetu
Export.table.toAsset({
  collection: waterCollection, // Warstwa do eksportu
  description: 'Water_Export', // Opis eksportu
  assetId: GZM_Water // Identyfikator docelowego assetu
});